{
	"info": {
		"_postman_id": "whatsapp-api-collection",
		"name": "WhatsApp API",
		"description": "API لاختبار إرسال الرسائل عبر WhatsApp",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "فحص حالة الجلسة",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "X-API-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "X-Session-Token",
						"value": "{{session_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/session-status",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"session-status"
					]
				},
				"description": "فحص حالة جلسة WhatsApp"
			},
			"response": []
		},
		{
			"name": "إرسال رسالة نصية",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-API-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "X-Session-Token",
						"value": "{{session_token}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"to\": \"966501234567\",\n  \"message\": \"مرحباً! هذه رسالة تجريبية من Postman 🚀\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/send-message",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"send-message"
					]
				},
				"description": "إرسال رسالة نصية لرقم هاتف"
			},
			"response": []
		},
		{
			"name": "إرسال رسالة مع إيموجي",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-API-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "X-Session-Token",
						"value": "{{session_token}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"to\": \"966501234567\",\n  \"message\": \"🚀 تم اختبار API بنجاح!\\n\\n✅ الرسائل تعمل\\n✅ الملفات تعمل\\n✅ المجموعات تعمل\\n\\n🎉 كل شيء يعمل بشكل مثالي!\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/send-message",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"send-message"
					]
				},
				"description": "إرسال رسالة مع إيموجي وتنسيق"
			},
			"response": []
		},
		{
			"name": "إرسال ملف",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-API-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "X-Session-Token",
						"value": "{{session_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "to",
							"value": "966501234567",
							"type": "text"
						},
						{
							"key": "media",
							"type": "file",
							"src": []
						},
						{
							"key": "caption",
							"value": "صورة جميلة! 📸",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{base_url}}/api/send-media",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"send-media"
					]
				},
				"description": "إرسال ملف مع رسالة توضيحية"
			},
			"response": []
		},
		{
			"name": "إرسال رسالة للمجموعة",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-API-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "X-Session-Token",
						"value": "{{session_token}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"groupId\": \"123456789@c.us\",\n  \"message\": \"🔔 إشعار مهم!\\n\\nتم اختبار API بنجاح من Postman\\n\\n📱 يمكنكم الآن إرسال رسائل عبر API\\n\\nشكراً لكم! 🙏\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/send-group-message",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"send-group-message"
					]
				},
				"description": "إرسال رسالة لمجموعة WhatsApp"
			},
			"response": []
		},
		{
			"name": "اختبار خطأ - بدون مفتاح API",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-Session-Token",
						"value": "{{session_token}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"to\": \"966501234567\",\n  \"message\": \"هذا اختبار للخطأ\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/send-message",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"send-message"
					]
				},
				"description": "اختبار الخطأ عند عدم وجود مفتاح API"
			},
			"response": []
		},
		{
			"name": "اختبار خطأ - بدون توكن الجلسة",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-API-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"to\": \"966501234567\",\n  \"message\": \"هذا اختبار للخطأ\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/send-message",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"send-message"
					]
				},
				"description": "اختبار الخطأ عند عدم وجود توكن الجلسة"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// تسجيل وقت بداية الطلب",
					"pm.globals.set('request_start_time', Date.now());"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// حساب وقت الاستجابة",
					"const startTime = pm.globals.get('request_start_time');",
					"const endTime = Date.now();",
					"const responseTime = endTime - startTime;",
					"",
					"// اختبار الاستجابة",
					"pm.test('Status code is 200', function () {",
					"    pm.response.to.have.status(200);",
					"});",
					"",
					"pm.test('Response has success field', function () {",
					"    const jsonData = pm.response.json();",
					"    pm.expect(jsonData).to.have.property('success');",
					"});",
					"",
					"pm.test('Response time is less than 5000ms', function () {",
					"    pm.expect(responseTime).to.be.below(5000);",
					"});",
					"",
					"// تسجيل النتيجة",
					"console.log('Response Time:', responseTime + 'ms');",
					"console.log('Status:', pm.response.status);",
					"console.log('Response:', pm.response.text());"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "api_key",
			"value": "YOUR_API_KEY_HERE",
			"type": "string"
		},
		{
			"key": "session_token",
			"value": "YOUR_SESSION_TOKEN_HERE",
			"type": "string"
		}
	]
}
