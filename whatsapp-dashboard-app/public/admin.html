<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† - WhatsApp Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        .navbar {
            background: #25D366;
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .navbar h1 {
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .navbar h1::before {
            content: "âš™ï¸";
            font-size: 28px;
        }

        .navbar .nav-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .header-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .header-section h2 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #25D366;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .tab-button {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 10px;
            font-weight: 500;
            transition: all 0.3s ease;
            color: #666;
        }

        .tab-button.active {
            background: #25D366;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .content-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .user-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .user-card:hover {
            border-color: #25D366;
            box-shadow: 0 3px 10px rgba(37, 211, 102, 0.1);
        }

        .user-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .user-info h6 {
            color: #333;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .user-info p {
            color: #666;
            margin: 0;
        }

        .user-status {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        .status-admin {
            background: #cce5ff;
            color: #004085;
        }

        .user-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail-item {
            text-align: center;
        }

        .detail-label {
            color: #666;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .detail-value {
            color: #333;
            font-weight: 600;
        }

        .user-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-primary {
            background: #25D366;
            color: white;
        }

        .btn-primary:hover {
            background: #128C7E;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-warning {
            background: #ffc107;
            color: #333;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-info:hover {
            background: #138496;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            background: #25D366;
            color: white;
            padding: 20px 30px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 20px;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            background: none;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #25D366;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .modal-footer {
            padding: 20px 30px;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            z-index: 9999;
            min-width: 300px;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #28a745;
        }

        .notification.error {
            background: #dc3545;
        }

        .notification.warning {
            background: #ffc107;
            color: #333;
        }

        .notification.info {
            background: #17a2b8;
        }

        .bulk-actions {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .bulk-actions.show {
            display: block;
        }

        .search-box {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .search-box:focus {
            outline: none;
            border-color: #25D366;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #25D366;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .user-details {
                grid-template-columns: 1fr;
            }
            
            .user-actions {
                justify-content: center;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <h1>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</h1>
        <div class="nav-actions">
            <a href="/dashboard" class="back-btn">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <button class="back-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
        </div>
    </nav>

    <div class="container">
        <!-- Header -->
        <div class="header-section">
            <h2>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</h2>
            <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø¬Ù„Ø³Ø§Øª ÙˆØ§Ù„Ù†Ø¸Ø§Ù…</p>
        </div>

        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalUsers">0</div>
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="activeUsers">0</div>
                <div class="stat-label">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalSessions">0</div>
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¬Ù„Ø³Ø§Øª</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="connectedSessions">0</div>
                <div class="stat-label">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…ØªØµÙ„Ø©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalMessages">0</div>
                <div class="stat-label">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="apiCalls">0</div>
                <div class="stat-label">Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª API</div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('users')">
                ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
            </button>
            <button class="tab-button" onclick="switchTab('sessions')">
                ğŸ“± Ø§Ù„Ø¬Ù„Ø³Ø§Øª
            </button>
            <button class="tab-button" onclick="switchTab('packages')">
                ğŸ“¦ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª
            </button>
            <button class="tab-button" onclick="switchTab('settings')">
                âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </button>
        </div>

        <!-- Users Tab -->
        <div id="users-tab" class="tab-content active">
            <div class="content-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
                    <div>
                        <button class="btn btn-primary" onclick="showAddUserModal()">
                            â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…
                        </button>
                        <button class="btn btn-secondary" onclick="toggleBulkActions()">
                            ğŸ“‹ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¬Ù…Ø§Ø¹ÙŠØ©
                        </button>
                    </div>
                </div>
                
                <input type="text" class="search-box" id="userSearch" placeholder="ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†..." onkeyup="searchUsers()">
                
                <div class="bulk-actions" id="bulkActions">
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <span>Ø§Ù„Ù…Ø­Ø¯Ø¯: <span id="selectedCount">0</span></span>
                        <button class="btn btn-warning" onclick="bulkToggleStatus()">ØªÙØ¹ÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù</button>
                        <button class="btn btn-info" onclick="bulkUpdateSessions()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù„Ø³Ø§Øª</button>
                        <button class="btn btn-danger" onclick="bulkDelete()">Ø­Ø°Ù</button>
                        <button class="btn btn-secondary" onclick="clearSelection()">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ¯</button>
                    </div>
                </div>
                
                <div id="usersList">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sessions Tab -->
        <div id="sessions-tab" class="tab-content">
            <div class="content-card">
                <h3>ğŸ“± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª</h3>
                <div id="sessionsList">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø§Øª...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Packages Tab -->
        <div id="packages-tab" class="tab-content">
            <div class="content-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</h3>
                    <button class="btn btn-primary" onclick="showAddPackageModal()">
                        â• Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø©
                    </button>
                </div>
                <div id="packagesList">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <div class="content-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                    <a href="/limits.html" class="btn btn-info" target="_blank">
                        ğŸ“Š Ø¹Ø±Ø¶ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù†Ø¸Ø§Ù…
                    </a>
                </div>
                <div id="settingsContent">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</h3>
                <button class="close" onclick="closeModal('addUserModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addUserForm">
                    <div class="form-group">
                        <label for="newUsername">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                        <input type="text" id="newUsername" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" required>
                    </div>
                    <div class="form-group">
                        <label for="newEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="newEmail" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                    </div>
                    <div class="form-group">
                        <label for="newPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="newPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newMaxSessions">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¬Ù„Ø³Ø§Øª</label>
                            <input type="number" id="newMaxSessions" placeholder="1" value="1" min="1" max="10" required>
                        </div>
                        <div class="form-group">
                            <label for="newSessionDays">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ù„ÙƒÙ„ Ø¬Ù„Ø³Ø©</label>
                            <input type="number" id="newSessionDays" placeholder="30" value="30" min="1" max="365" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="newIsAdmin" style="width: auto;">
                            ØµÙ„Ø§Ø­ÙŠØ§Øª Ø£Ø¯Ù…Ù†
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addUserModal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn btn-primary" onclick="addUser()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</button>
            </div>
        </div>
    </div>

    <!-- Add Package Modal -->
    <div id="addPackageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“¦ Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
                <button class="close" onclick="closeModal('addPackageModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addPackageForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="packageId">Ù…Ø¹Ø±Ù Ø§Ù„Ø¨Ø§Ù‚Ø©</label>
                            <input type="text" id="packageId" placeholder="Ù…Ø«Ø§Ù„: basic, premium, pro" required>
                        </div>
                        <div class="form-group">
                            <label for="packageName">Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©</label>
                            <input type="text" id="packageName" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="packagePrice">Ø§Ù„Ø³Ø¹Ø± (USD)</label>
                            <input type="number" id="packagePrice" placeholder="0.00" step="0.01" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="packageDuration">Ø§Ù„Ù…Ø¯Ø© Ø¨Ø§Ù„Ø£ÙŠØ§Ù…</label>
                            <input type="number" id="packageDuration" placeholder="30" min="1" max="365" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="packageMaxSessions">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¬Ù„Ø³Ø§Øª</label>
                        <input type="number" id="packageMaxSessions" placeholder="1" min="1" max="10" required>
                    </div>
                    <div class="form-group">
                        <label for="packageFeatures">Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª (Ø³Ø·Ø± ÙˆØ§Ø­Ø¯ Ù„ÙƒÙ„ Ù…ÙŠØ²Ø©)</label>
                        <textarea id="packageFeatures" placeholder="Ù…Ø«Ø§Ù„:&#10;Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯&#10;Ø¯Ø¹Ù… Ø§Ù„Ù…Ù„ÙØ§Øª&#10;API Ù…ØªÙ‚Ø¯Ù…" style="height: 100px"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addPackageModal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn btn-primary" onclick="addPackage()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø©</button>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div id="editUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
                <button class="close" onclick="closeModal('editUserModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editUserForm">
                    <input type="hidden" id="editUserId">
                    <div class="form-group">
                        <label for="editUsername">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                        <input type="text" id="editUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="editEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="editEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="editPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ø§ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© Ù„Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø­Ø§Ù„ÙŠØ©)</label>
                        <input type="password" id="editPassword">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editMaxSessions">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¬Ù„Ø³Ø§Øª</label>
                            <input type="number" id="editMaxSessions" min="1" max="10" required>
                        </div>
                        <div class="form-group">
                            <label for="editSessionDays">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ù„ÙƒÙ„ Ø¬Ù„Ø³Ø©</label>
                            <input type="number" id="editSessionDays" min="1" max="365" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="editIsAdmin" style="width: auto;">
                            ØµÙ„Ø§Ø­ÙŠØ§Øª Ø£Ø¯Ù…Ù†
                        </label>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="editIsActive" style="width: auto;">
                            Ø§Ù„Ø­Ø³Ø§Ø¨ Ù†Ø´Ø·
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('editUserModal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn btn-primary" onclick="updateUser()">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let users = [];
        let packages = [];
        let subscriptions = [];
        let sessions = [];
        let selectedUsers = new Set();
        let currentTab = 'users';

        // Load data on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadUserInfo();
            loadStats();
            loadUsers();
            loadSessions();
            loadPackages();
            loadSettings();
        });

        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
            
            currentTab = tabName;

            // Load data for the tab
            switch(tabName) {
                case 'users':
                    loadUsers();
                    break;
                case 'sessions':
                    loadSessions();
                    break;
                case 'packages':
                    loadPackages();
                    break;
                case 'settings':
                    loadSettings();
                    break;
            }
        }

        // Modal functions
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        async function loadUserInfo() {
            try {
                const response = await fetch('/api/me');
                const data = await response.json();
                if (data.success) {
                    currentUser = data.user;
                    if (!currentUser.isAdmin) {
                        window.location.href = '/dashboard';
                    }
                }
            } catch (error) {
                console.error('Error loading user info:', error);
                window.location.href = '/dashboard';
            }
        }

        // User management functions
        function showAddUserModal() {
            document.getElementById('addUserForm').reset();
            showModal('addUserModal');
        }

        function showAddPackageModal() {
            document.getElementById('addPackageForm').reset();
            showModal('addPackageModal');
        }

        async function addUser() {
            const username = document.getElementById('newUsername').value.trim();
            const email = document.getElementById('newEmail').value.trim();
            const password = document.getElementById('newPassword').value;
            const maxSessions = parseInt(document.getElementById('newMaxSessions').value);
            const sessionDays = parseInt(document.getElementById('newSessionDays').value);
            const isAdmin = document.getElementById('newIsAdmin').checked;

            if (!username || !email || !password) {
                showNotification('error', 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }

            try {
                const response = await fetch('/api/admin/users', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username, email, password, maxSessions, sessionDays, isAdmin
                    })
                });

                const data = await response.json();
                if (data.success) {
                    closeModal('addUserModal');
                    showNotification('success', 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');
                    loadUsers();
                    loadStats();
                } else {
                    showNotification('error', data.error || 'ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                }
            } catch (error) {
                console.error('Error adding user:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        // Notification system
        function showNotification(type, message) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                ${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : type === 'warning' ? 'âš ï¸' : 'â„¹ï¸'} ${message}
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 5000);
        }

        async function logout() {
            try {
                const response = await fetch('/api/logout', {
                    method: 'POST'
                });
                
                if (response.ok) {
                    window.location.href = '/';
                }
            } catch (error) {
                console.error('Logout error:', error);
                window.location.href = '/';
            }
        }

        async function loadUsers() {
            try {
                const response = await fetch('/api/admin/users');
                const data = await response.json();
                if (data.success) {
                    users = data.users;
                    displayUsers();
                }
            } catch (error) {
                console.error('Error loading users:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†');
            }
        }

        async function loadStats() {
            try {
                const response = await fetch('/api/admin/stats');
                const data = await response.json();
                if (data.success) {
                    const stats = data.stats;
                    document.getElementById('totalUsers').textContent = stats.totalUsers || 0;
                    document.getElementById('activeUsers').textContent = stats.activeUsers || 0;
                    document.getElementById('totalSessions').textContent = stats.totalSessions || 0;
                    document.getElementById('connectedSessions').textContent = stats.connectedSessions || 0;
                    document.getElementById('totalMessages').textContent = stats.totalMessages || 0;
                    document.getElementById('apiCalls').textContent = stats.apiCalls || 0;
                }
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Additional functions
        function editUser(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;

            document.getElementById('editUserId').value = user.id;
            document.getElementById('editUsername').value = user.username;
            document.getElementById('editEmail').value = user.email;
            document.getElementById('editMaxSessions').value = user.max_sessions || 1;
            document.getElementById('editSessionDays').value = user.session_ttl_days || 30;
            document.getElementById('editIsAdmin').checked = user.is_admin || false;
            document.getElementById('editIsActive').checked = user.is_active || false;

            showModal('editUserModal');
        }

        async function updateUser() {
            const userId = document.getElementById('editUserId').value;
            const username = document.getElementById('editUsername').value.trim();
            const email = document.getElementById('editEmail').value.trim();
            const password = document.getElementById('editPassword').value;
            const maxSessions = parseInt(document.getElementById('editMaxSessions').value);
            const sessionDays = parseInt(document.getElementById('editSessionDays').value);
            const isAdmin = document.getElementById('editIsAdmin').checked;
            const isActive = document.getElementById('editIsActive').checked;

            if (!username || !email) {
                showNotification('error', 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }

            try {
                const response = await fetch(`/api/admin/users/${userId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username, email, password, maxSessions, sessionDays, isAdmin, isActive
                    })
                });

                const data = await response.json();
                if (data.success) {
                    closeModal('editUserModal');
                    showNotification('success', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');
                    loadUsers();
                    loadStats();
                } else {
                    showNotification('error', data.error || 'ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                }
            } catch (error) {
                console.error('Error updating user:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        async function toggleUserStatus(userId) {
            try {
                const response = await fetch(`/api/admin/users/${userId}/toggle`, {
                    method: 'POST'
                });

                const data = await response.json();
                if (data.success) {
                    showNotification('success', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');
                    loadUsers();
                    loadStats();
                } else {
                    showNotification('error', data.error || 'ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                }
            } catch (error) {
                console.error('Error toggling user status:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        async function deleteUser(userId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¬Ù„Ø³Ø§ØªÙ‡ Ø£ÙŠØ¶Ø§Ù‹.')) {
                return;
            }

            try {
                const response = await fetch(`/api/admin/users/${userId}`, {
                    method: 'DELETE'
                });

                const data = await response.json();
                if (data.success) {
                    showNotification('success', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');
                    loadUsers();
                    loadStats();
                } else {
                    showNotification('error', data.error || 'ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                }
            } catch (error) {
                console.error('Error deleting user:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        // Bulk actions
        function toggleUserSelection(userId) {
            if (selectedUsers.has(userId)) {
                selectedUsers.delete(userId);
            } else {
                selectedUsers.add(userId);
            }
            updateBulkActions();
        }

        function updateBulkActions() {
            const count = selectedUsers.size;
            document.getElementById('selectedCount').textContent = count;
            document.getElementById('bulkActions').classList.toggle('show', count > 0);
        }

        function toggleBulkActions() {
            const bulkActions = document.getElementById('bulkActions');
            bulkActions.classList.toggle('show');
        }

        function clearSelection() {
            selectedUsers.clear();
            document.querySelectorAll('.user-checkbox').forEach(cb => cb.checked = false);
            updateBulkActions();
        }

        function searchUsers() {
            const searchTerm = document.getElementById('userSearch').value.toLowerCase();
            const userCards = document.querySelectorAll('.user-card');
            
            userCards.forEach(card => {
                const username = card.querySelector('h6').textContent.toLowerCase();
                const email = card.querySelector('p').textContent.toLowerCase();
                
                if (username.includes(searchTerm) || email.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Package management
        async function addPackage() {
            const id = document.getElementById('packageId').value.trim();
            const name = document.getElementById('packageName').value.trim();
            const price = parseFloat(document.getElementById('packagePrice').value);
            const durationDays = parseInt(document.getElementById('packageDuration').value);
            const maxSessions = parseInt(document.getElementById('packageMaxSessions').value);
            const features = document.getElementById('packageFeatures').value.split('\n').filter(f => f.trim());

            if (!id || !name || !price || !durationDays || !maxSessions) {
                showNotification('error', 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }

            try {
                const response = await fetch('/api/admin/packages', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        id, name, price, durationDays, maxSessions, features
                    })
                });

                const data = await response.json();
                if (data.success) {
                    closeModal('addPackageModal');
                    showNotification('success', 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­');
                    loadPackages();
                } else {
                    showNotification('error', data.error || 'ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø©');
                }
            } catch (error) {
                console.error('Error adding package:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø©');
            }
        }

        function editPackage(packageId) {
            showNotification('info', 'Ù…ÙŠØ²Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±');
        }

        async function deletePackage(packageId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø§Ù‚Ø©ØŸ')) {
                return;
            }

            try {
                const response = await fetch(`/api/admin/packages/${packageId}`, {
                    method: 'DELETE'
                });

                const data = await response.json();
                if (data.success) {
                    showNotification('success', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­');
                    loadPackages();
                } else {
                    showNotification('error', data.error || 'ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨Ø§Ù‚Ø©');
                }
            } catch (error) {
                console.error('Error deleting package:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨Ø§Ù‚Ø©');
            }
        }

        // Session management
        function viewSession(sessionId) {
            window.open(`/session/${sessionId}`, '_blank');
        }

        async function restartSession(sessionId) {
            try {
                const response = await fetch(`/api/admin/sessions/${sessionId}/restart`, {
                    method: 'POST'
                });

                const data = await response.json();
                if (data.success) {
                    showNotification('success', 'ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø© Ø¨Ù†Ø¬Ø§Ø­');
                    loadSessions();
                } else {
                    showNotification('error', data.error || 'ÙØ´Ù„ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø©');
                }
            } catch (error) {
                console.error('Error restarting session:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø©');
            }
        }

        async function deleteSession(sessionId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©ØŸ')) {
                return;
            }

            try {
                const response = await fetch(`/api/admin/sessions/${sessionId}`, {
                    method: 'DELETE'
                });

                const data = await response.json();
                if (data.success) {
                    showNotification('success', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø© Ø¨Ù†Ø¬Ø§Ø­');
                    loadSessions();
                    loadStats();
                } else {
                    showNotification('error', data.error || 'ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø©');
                }
            } catch (error) {
                console.error('Error deleting session:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø©');
            }
        }

        function viewUserSessions(userId) {
            switchTab('sessions');
            // Filter sessions by user
            const userSessions = sessions.filter(s => s.user_id === userId);
            if (userSessions.length === 0) {
                showNotification('info', 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        function editSettings() {
            showNotification('info', 'Ù…ÙŠØ²Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±');
        }

        function displayUsers() {
            const container = document.getElementById('usersList');
            
            if (users.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>';
                return;
            }

            let html = '';
            users.forEach(user => {
                const statusClass = user.is_admin ? 'status-admin' : 
                                  user.is_active ? 'status-active' : 'status-inactive';
                const statusText = user.is_admin ? 'Ø£Ø¯Ù…Ù†' : 
                                 user.is_active ? 'Ù†Ø´Ø·' : 'Ù…ÙˆÙ‚ÙˆÙ';

                html += `
                    <div class="user-card">
                        <div class="user-header">
                            <div class="user-info">
                                <h6>${user.username}</h6>
                                <p>${user.email}</p>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span class="user-status ${statusClass}">${statusText}</span>
                                <input type="checkbox" class="user-checkbox" value="${user.id}" onchange="toggleUserSelection(${user.id})">
                            </div>
                        </div>
                        
                        <div class="user-details">
                            <div class="detail-item">
                                <div class="detail-label">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©</div>
                                <div class="detail-value">${user.max_sessions || 1}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ø£ÙŠØ§Ù… Ø§Ù„Ø¬Ù„Ø³Ø©</div>
                                <div class="detail-value">${user.session_ttl_days || 30} ÙŠÙˆÙ…</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</div>
                                <div class="detail-value">${new Date(user.created_at).toLocaleDateString('ar-SA')}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ø¢Ø®Ø± Ù†Ø´Ø§Ø·</div>
                                <div class="detail-value">${user.last_login ? new Date(user.last_login).toLocaleDateString('ar-SA') : 'Ù„Ù… ÙŠØ³Ø¬Ù„ Ø¯Ø®ÙˆÙ„'}</div>
                            </div>
                        </div>
                        
                        <div class="user-actions">
                            <button class="btn btn-primary" onclick="editUser(${user.id})">
                                âœï¸ ØªØ¹Ø¯ÙŠÙ„
                            </button>
                            <button class="btn btn-warning" onclick="toggleUserStatus(${user.id})">
                                ${user.is_active ? 'â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù' : 'â–¶ï¸ ØªÙØ¹ÙŠÙ„'}
                            </button>
                            <button class="btn btn-info" onclick="viewUserSessions(${user.id})">
                                ğŸ“± Ø§Ù„Ø¬Ù„Ø³Ø§Øª
                            </button>
                            <button class="btn btn-danger" onclick="deleteUser(${user.id})">
                                ğŸ—‘ï¸ Ø­Ø°Ù
                            </button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        async function loadSessions() {
            try {
                const response = await fetch('/api/admin/sessions');
                const data = await response.json();
                if (data.success) {
                    sessions = data.sessions;
                    displaySessions();
                }
            } catch (error) {
                console.error('Error loading sessions:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø§Øª');
            }
        }

        function displaySessions() {
            const container = document.getElementById('sessionsList');
            
            if (sessions.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø§Øª</p>';
                return;
            }

            let html = '';
            sessions.forEach(session => {
                const statusClass = session.status === 'connected' ? 'status-active' : 
                                  session.status === 'waiting_for_qr' ? 'status-warning' : 'status-inactive';
                const statusText = session.status === 'connected' ? 'Ù…ØªØµÙ„' : 
                                 session.status === 'waiting_for_qr' ? 'Ø§Ù†ØªØ¸Ø§Ø± QR' : 'ØºÙŠØ± Ù…ØªØµÙ„';

                html += `
                    <div class="user-card">
                        <div class="user-header">
                            <div class="user-info">
                                <h6>${session.session_name}</h6>
                                <p>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${session.username}</p>
                            </div>
                            <span class="user-status ${statusClass}">${statusText}</span>
                        </div>
                        
                        <div class="user-details">
                            <div class="detail-item">
                                <div class="detail-label">Ù…Ø¹Ø±Ù Ø§Ù„Ø¬Ù„Ø³Ø©</div>
                                <div class="detail-value">${session.session_id}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</div>
                                <div class="detail-value">${new Date(session.created_at).toLocaleDateString('ar-SA')}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</div>
                                <div class="detail-value">${new Date(session.updated_at).toLocaleDateString('ar-SA')}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©</div>
                                <div class="detail-value">${session.message_count || 0}</div>
                            </div>
                        </div>
                        
                        <div class="user-actions">
                            <button class="btn btn-primary" onclick="viewSession(${session.id})">
                                ğŸ‘ï¸ Ø¹Ø±Ø¶
                            </button>
                            <button class="btn btn-warning" onclick="restartSession(${session.id})">
                                ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„
                            </button>
                            <button class="btn btn-danger" onclick="deleteSession(${session.id})">
                                ğŸ—‘ï¸ Ø­Ø°Ù
                            </button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        async function loadPackages() {
            try {
                const response = await fetch('/api/settings');
                const data = await response.json();
                if (data.success && data.packages) {
                    packages = data.packages;
                    displayPackages();
                }
            } catch (error) {
                console.error('Error loading packages:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª');
            }
        }

        function displayPackages() {
            const container = document.getElementById('packagesList');
            
            if (packages.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ø§Ù‚Ø§Øª</p>';
                return;
            }

            let html = '';
            packages.forEach(pkg => {
                html += `
                    <div class="user-card">
                        <div class="user-header">
                            <div class="user-info">
                                <h6>${pkg.name}</h6>
                                <p>Ù…Ø¹Ø±Ù: ${pkg.id}</p>
                            </div>
                            <div style="font-size: 24px; font-weight: bold; color: #25D366;">
                                $${pkg.price}
                            </div>
                        </div>
                        
                        <div class="user-details">
                            <div class="detail-item">
                                <div class="detail-label">Ø§Ù„Ù…Ø¯Ø©</div>
                                <div class="detail-value">${pkg.durationDays} ÙŠÙˆÙ…</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¬Ù„Ø³Ø§Øª</div>
                                <div class="detail-value">${pkg.maxSessions}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</div>
                                <div class="detail-value">${pkg.features ? pkg.features.length : 0} Ù…ÙŠØ²Ø©</div>
                            </div>
                        </div>
                        
                        <div class="user-actions">
                            <button class="btn btn-primary" onclick="editPackage('${pkg.id}')">
                                âœï¸ ØªØ¹Ø¯ÙŠÙ„
                            </button>
                            <button class="btn btn-danger" onclick="deletePackage('${pkg.id}')">
                                ğŸ—‘ï¸ Ø­Ø°Ù
                            </button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        async function loadSettings() {
            try {
                const response = await fetch('/api/admin/settings');
                const data = await response.json();
                if (data.success) {
                    displaySettings(data.settings);
                }
            } catch (error) {
                console.error('Error loading settings:', error);
                showNotification('error', 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
            }
        }

        function displaySettings(settings) {
            const container = document.getElementById('settingsContent');
            
            container.innerHTML = `
                <div class="user-card">
                    <h4>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ù…Ø©</h4>
                    <div class="user-details">
                        <div class="detail-item">
                            <div class="detail-label">Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ø£Ø¯Ù…Ù†</div>
                            <div class="detail-value">${settings.adminPhone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ø£Ø¯Ù…Ù†</div>
                            <div class="detail-value">${settings.adminEmail || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</div>
                            <div class="detail-value">${settings.defaultSessionTtl || 30} ÙŠÙˆÙ…</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</div>
                            <div class="detail-value">${settings.defaultMaxSessions || 1}</div>
                        </div>
                    </div>
                    <div class="user-actions">
                        <button class="btn btn-primary" onclick="editSettings()">
                            âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                        </button>
                    </div>
                </div>
            `;
        }

        async function loadStats() {
            try {
                const response = await fetch('/api/admin/stats');
                const data = await response.json();
                if (data.success) {
                    const stats = data.stats;
                    document.getElementById('totalUsers').textContent = stats.totalUsers || 0;
                    document.getElementById('activeUsers').textContent = stats.activeUsers || 0;
                    document.getElementById('totalSessions').textContent = stats.totalSessions || 0;
                    document.getElementById('totalSubscriptions').textContent = stats.totalSubscriptions || 0;
                }
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        async function loadUsers() {
            try {
                const response = await fetch('/api/admin/users');
                const data = await response.json();
                if (data.success) {
                    users = data.users;
                    displayUsers();
                }
            } catch (error) {
                console.error('Error loading users:', error);
            }
        }

        function displayUsers() {
            const container = document.getElementById('usersList');
            
            if (users.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>';
                return;
            }

            let html = '';
            users.forEach(user => {
                const statusClass = user.is_admin ? 'status-admin' : 
                                  user.is_active ? 'status-active' : 'status-inactive';
                const statusText = user.is_admin ? 'Ø£Ø¯Ù…Ù†' : 
                                 user.is_active ? 'Ù†Ø´Ø·' : 'Ù…ÙˆÙ‚ÙˆÙ';

                html += `
                    <div class="user-card">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h6 class="mb-1">${user.username}</h6>
                                <p class="text-muted mb-2">${user.email}</p>
                                <div class="d-flex align-items-center gap-3">
                                    <span class="user-status ${statusClass}">${statusText}</span>
                                    <small class="text-muted">
                                        <i class="fas fa-users me-1"></i>
                                        ${user.max_sessions} Ø¬Ù„Ø³Ø©
                                    </small>
                                    <small class="text-muted">
                                        <i class="fas fa-clock me-1"></i>
                                        ${user.session_ttl_days || 30} ÙŠÙˆÙ…
                                    </small>
                                </div>
                            </div>
                            <div class="col-md-4 text-end">
                                <div class="btn-group" role="group">
                                    <button class="action-btn btn-edit" onclick="editUser(${user.id})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn btn-toggle" onclick="toggleUserStatus(${user.id})">
                                        <i class="fas fa-${user.is_active ? 'ban' : 'check'}"></i>
                                    </button>
                                    <button class="action-btn btn-delete" onclick="deleteUser(${user.id})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        async function loadPackages() {
            try {
                const response = await fetch('/api/settings');
                const data = await response.json();
                if (data.success && data.packages) {
                    packages = data.packages;
                    displayPackages();
                }
            } catch (error) {
                console.error('Error loading packages:', error);
            }
        }

        function displayPackages() {
            const container = document.getElementById('packagesList');
            
            if (packages.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ø§Ù‚Ø§Øª</p>';
                return;
            }

            let html = '';
            packages.forEach(pkg => {
                html += `
                    <div class="package-card">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h6 class="mb-1">${pkg.name}</h6>
                                <div class="package-price">$${pkg.price} USD</div>
                                <ul class="feature-list">
                                    ${pkg.features.map(feature => `<li>${feature}</li>`).join('')}
                                </ul>
                                <small class="text-muted">
                                    <i class="fas fa-clock me-1"></i>
                                    ${pkg.durationDays} ÙŠÙˆÙ…
                                </small>
                            </div>
                            <div class="col-md-4 text-end">
                                <div class="btn-group" role="group">
                                    <button class="action-btn btn-edit" onclick="editPackage('${pkg.id}')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn btn-delete" onclick="deletePackage('${pkg.id}')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        async function loadSubscriptions() {
            try {
                const response = await fetch('/api/admin/subscriptions');
                const data = await response.json();
                if (data.success) {
                    subscriptions = data.subscriptions;
                    displaySubscriptions();
                }
            } catch (error) {
                console.error('Error loading subscriptions:', error);
            }
        }

        function displaySubscriptions() {
            const container = document.getElementById('subscriptionsList');
            
            if (subscriptions.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</p>';
                return;
            }

            let html = `
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                                <th>Ø§Ù„Ø¨Ø§Ù‚Ø©</th>
                                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            subscriptions.forEach(sub => {
                const startDate = new Date(sub.startDate).toLocaleDateString('ar-SA');
                const endDate = new Date(sub.endDate).toLocaleDateString('ar-SA');
                const statusClass = sub.status === 'active' ? 'badge bg-success' : 'badge bg-danger';
                const statusText = sub.status === 'active' ? 'Ù†Ø´Ø·' : 'Ù…Ù†ØªÙ‡ÙŠ';

                html += `
                    <tr>
                        <td>${sub.username}</td>
                        <td>${sub.packageName}</td>
                        <td>$${sub.price} ${sub.currency}</td>
                        <td>${startDate}</td>
                        <td>${endDate}</td>
                        <td><span class="${statusClass}">${statusText}</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline-danger" onclick="cancelSubscription(${sub.id})">
                                <i class="fas fa-times"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });

            html += `
                        </tbody>
                    </table>
                </div>
            `;

            container.innerHTML = html;
        }

        function showAddUserModal() {
            const modal = new bootstrap.Modal(document.getElementById('addUserModal'));
            modal.show();
        }

        function showAddPackageModal() {
            const modal = new bootstrap.Modal(document.getElementById('addPackageModal'));
            modal.show();
        }

        async function addUser() {
            const username = document.getElementById('newUsername').value.trim();
            const email = document.getElementById('newEmail').value.trim();
            const password = document.getElementById('newPassword').value;
            const maxSessions = parseInt(document.getElementById('newMaxSessions').value);
            const isAdmin = document.getElementById('newIsAdmin').checked;

            if (!username || !email || !password) {
                showErrorMessage('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }

            try {
                const response = await fetch('/api/admin/users', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        username,
                        email,
                        password,
                        maxSessions,
                        isAdmin
                    })
                });

                const data = await response.json();
                if (data.success) {
                    bootstrap.Modal.getInstance(document.getElementById('addUserModal')).hide();
                    showSuccessMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');
                    loadUsers();
                    loadStats();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                console.error('Error adding user:', error);
                showErrorMessage('ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        async function addPackage() {
            const id = document.getElementById('packageId').value.trim();
            const name = document.getElementById('packageName').value.trim();
            const price = parseFloat(document.getElementById('packagePrice').value);
            const durationDays = parseInt(document.getElementById('packageDuration').value);
            const maxSessions = parseInt(document.getElementById('packageMaxSessions').value);
            const features = document.getElementById('packageFeatures').value.split('\n').filter(f => f.trim());

            if (!id || !name || !price || !durationDays || !maxSessions) {
                showErrorMessage('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }

            try {
                const response = await fetch('/api/admin/packages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        id,
                        name,
                        price,
                        durationDays,
                        maxSessions,
                        features
                    })
                });

                const data = await response.json();
                if (data.success) {
                    bootstrap.Modal.getInstance(document.getElementById('addPackageModal')).hide();
                    showSuccessMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­');
                    loadPackages();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                console.error('Error adding package:', error);
                showErrorMessage('ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø©');
            }
        }

        async function toggleUserStatus(userId) {
            try {
                const response = await fetch(`/api/admin/users/${userId}/toggle`, {
                    method: 'POST'
                });

                const data = await response.json();
                if (data.success) {
                    showSuccessMessage('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');
                    loadUsers();
                    loadStats();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                console.error('Error toggling user status:', error);
                showErrorMessage('ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        async function deleteUser(userId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) {
                return;
            }

            try {
                const response = await fetch(`/api/admin/users/${userId}`, {
                    method: 'DELETE'
                });

                const data = await response.json();
                if (data.success) {
                    showSuccessMessage('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');
                    loadUsers();
                    loadStats();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                console.error('Error deleting user:', error);
                showErrorMessage('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        function editUser(userId) {
            // Implement edit user functionality
            showInfoMessage('Ù…ÙŠØ²Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±');
        }

        function editPackage(packageId) {
            // Implement edit package functionality
            showInfoMessage('Ù…ÙŠØ²Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±');
        }

        async function deletePackage(packageId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø§Ù‚Ø©ØŸ')) {
                return;
            }

            try {
                const response = await fetch(`/api/admin/packages/${packageId}`, {
                    method: 'DELETE'
                });

                const data = await response.json();
                if (data.success) {
                    showSuccessMessage('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­');
                    loadPackages();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                console.error('Error deleting package:', error);
                showErrorMessage('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¨Ø§Ù‚Ø©');
            }
        }

        async function cancelSubscription(subscriptionId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØŸ')) {
                return;
            }

            try {
                const response = await fetch(`/api/admin/subscriptions/${subscriptionId}/cancel`, {
                    method: 'POST'
                });

                const data = await response.json();
                if (data.success) {
                    showSuccessMessage('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù†Ø¬Ø§Ø­');
                    loadSubscriptions();
                    loadStats();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                console.error('Error canceling subscription:', error);
                showErrorMessage('ÙØ´Ù„ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ');
            }
        }

        function showSuccessMessage(message) {
            const notification = document.createElement('div');
            notification.className = 'alert alert-success alert-dismissible fade show position-fixed';
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            notification.innerHTML = `
                <i class="fas fa-check-circle me-2"></i>
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        function showErrorMessage(message) {
            const notification = document.createElement('div');
            notification.className = 'alert alert-danger alert-dismissible fade show position-fixed';
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            notification.innerHTML = `
                <i class="fas fa-exclamation-circle me-2"></i>
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        function showInfoMessage(message) {
            const notification = document.createElement('div');
            notification.className = 'alert alert-info alert-dismissible fade show position-fixed';
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            notification.innerHTML = `
                <i class="fas fa-info-circle me-2"></i>
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        function logout() {
            fetch('/logout')
                .then(() => {
                    window.location.href = '/';
                })
                .catch(error => {
                    console.error('Logout error:', error);
                    window.location.href = '/';
                });
        }
    </script>
</body>
</html>

