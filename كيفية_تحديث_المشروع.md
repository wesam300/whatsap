# كيفية تحديث مشروع whatsapp-web.js

## الوضع الحالي
- **إصدارك الحالي**: 1.33.2
- **الإصدار الأحدث**: 1.34.2
- **المستودع الأصلي**: https://github.com/pedroslopez/whatsapp-web.js

---

## الطريقة 1: تحديث الكود من المستودع الأصلي (موصى بها)

### الخطوة 1: التأكد من وجود upstream
```bash
git remote -v
```

إذا لم يكن موجود، أضفه:
```bash
git remote add upstream https://github.com/pedroslopez/whatsapp-web.js.git
```

### الخطوة 2: جلب التحديثات من المستودع الأصلي
```bash
git fetch upstream
```

### الخطوة 3: إنشاء فرع احتياطي (اختياري لكن موصى به)
```bash
git branch backup-before-update
```

### الخطوة 4: دمج التحديثات
لديك خياران:

#### أ) الدمج مع الحفاظ على تعديلاتك (Merge)
```bash
git merge upstream/main --allow-unrelated-histories
```
**ملاحظة**: قد تحدث تعارضات (conflicts) تحتاج لحلها يدوياً

#### ب) استبدال الكود بالكامل بالإصدار الجديد (Rebase)
```bash
# حفظ تعديلاتك أولاً
git stash

# استبدال الكود
git reset --hard upstream/main

# استرجاع تعديلاتك
git stash pop
```

---

## الطريقة 2: تحديث الحزم فقط (أسهل)

إذا كنت تستخدم المشروع كحزمة npm في مشروعك الآخر:

### في مجلد whatsapp-dashboard-app:
```bash
cd whatsapp-dashboard-app
npm update whatsapp-web.js
```

أو تحديث إلى إصدار محدد:
```bash
npm install whatsapp-web.js@latest
```

---

## الطريقة 3: نسخ الملفات المحددة يدوياً

إذا كنت تريد تحديث ملفات محددة فقط:

### الخطوة 1: جلب التحديثات
```bash
git fetch upstream
```

### الخطوة 2: نسخ ملفات محددة من الإصدار الجديد
```bash
# مثال: نسخ ملف Client.js
git checkout upstream/main -- src/Client.js

# مثال: نسخ ملف Message.js
git checkout upstream/main -- src/structures/Message.js
```

---

## حل التعارضات (Conflicts)

إذا حدثت تعارضات أثناء الدمج:

### 1. عرض الملفات المتعارضة
```bash
git status
```

### 2. فتح الملفات المتعارضة وحلها
ابحث عن العلامات:
```
<<<<<<< HEAD
كودك الحالي
=======
الكود الجديد من upstream
>>>>>>> upstream/main
```

### 3. بعد حل جميع التعارضات
```bash
git add .
git commit -m "تم دمج التحديثات من upstream"
```

---

## التحقق من التحديث

### 1. التحقق من الإصدار
```bash
cat package.json | grep version
```

### 2. التحقق من التغييرات
```bash
git log --oneline -10
```

### 3. تحديث الحزم
```bash
npm install
```

---

## نصائح مهمة

1. **احفظ نسخة احتياطية دائماً** قبل التحديث
2. **اختبر التطبيق** بعد التحديث للتأكد من عدم وجود مشاكل
3. **اقرأ ملاحظات الإصدار** (Release Notes) لمعرفة التغييرات
4. **إذا كان لديك تعديلات مهمة**، احفظها في فرع منفصل أولاً

---

## في حالة المشاكل

### إلغاء التحديث والعودة للنسخة السابقة
```bash
git reset --hard backup-before-update
```

أو
```bash
git reset --hard HEAD~1  # إلغاء آخر commit
```

---

## ملاحظات

- المستودع الأصلي: `upstream`
- مستودعك: `origin`
- فرعك الحالي: `main`

